/**
 * MOX CSS Configuration File
 *
 * Contains the settings to be used for calculating & generating the css files in `_generated`:
 * - spaces: all clamp-values for spacing for each space-key (e.g., xs, sm, md, lg, xl)
 * - responsive: all css-classes that should be generated for responsive design
 *
 */

import type { StylePropTypes } from "../moxReact/uiAtoms/AtomTypes";
import { prefix } from "./configOptions";
import { boxProps } from "./props/box";
import { flexProps } from "./props/flex";
import { linkProps } from "./props/link";
import { textProps } from "./props/text";

// Unfortunately, at the moment it's not possible to define these values with `css vars` - a media/container-query can be defined before any vars are available.
const viewportBreakpoints = {
  mobile: 600,
  tablet: 900,
  desktop: 1200,
  mq1440: 1440,
} as const;

// These values come from the container-breakpoints defined here: `src/moxCss/uiAtoms/layout/containerGrid.css`
const containerBreakpoints = {
  cq200: 200,
  cq400: 400,
  cq600: 600,
  cq800: 800,
} as const;

const props = {
  // Keys of these objects are used to map React props to classnames (see: `propsToClassNames` helper)
  ...linkProps,
  ...textProps,
  ...flexProps,
  ...boxProps,
};

export const moxConfig = {
  prefix,
  // The clamp values will be calculated so that on these min/max sizes of the viewport, the size will lock to resp. min/max value of the space (e.g. `md`).
  clampViewportInlineSize: { min: 360, max: 1440 },
  viewportBreakpoints,
  containerBreakpoints,
  // Generated classnames will be suffixed with the `options` values (e.g., `inline-size` -> `.mox-inline-size-sm`)
  // The values either be just what is defined in `options` (required), or these `options` will be mapped to a variable (use the helper-function `mapOptionsToCSSVars`) or different value via an `optionsMap` (e.g. `{ md: var(--mox-space-sm), ... }`)
  // Together this will generate the css line: `.mox-inline-size-sm { width: var(--mox-space-sm); }`
  // If `responsive` is true, the classes will be generated for each min/max breakpoint as well (e.g., `.mox-inline-size-sm@tabletMin`, `.mox-inline-size-sm@cq400Max`, etc.)
  props,
} as const satisfies MoxConfig;

export type MoxConfigProps = {
  [propKey: string]: {
    options: {
      [optionKey: string]: {
        [cssProperty: string]: string;
      };
    };
    responsive?: boolean;
    state?: "hover" | "focus" | "active" | "disabled";
  };
};

type MoxConfig = {
  prefix: string;
  clampViewportInlineSize: { min: number; max: number };
  viewportBreakpoints: typeof viewportBreakpoints;
  containerBreakpoints: typeof containerBreakpoints;
  props: MoxConfigProps;
};

//todo: make function to create styles based on these values inside .mox-content class
const markupContent = {
  p: {
    alignItems: "start",
    inlineSize: { mobileMin: "md", mobileMax: "xs" },
  },
} as const satisfies Record<
  string,
  StylePropTypes<readonly (keyof typeof props)[]>
>;

// // css:

// .markup-content {
//   p {
//     align-items: start;

//     @media and screen (600px) {
//       inlineSize: 'xs'
//     }
//   }
// }
